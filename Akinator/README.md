# Акинатор

## Описание проекта

Основной целью данного проекта является создание интеллектуальной системы, способной работать с *базой данных*, хранящей иерархически укомплектованные объекты и информацию о них.

## База данных

База данных, которая может быть обработана программой, имеет вид [двоичного дерева](https://ru.wikipedia.org/wiki/%D0%94%D0%B2%D0%BE%D0%B8%D1%87%D0%BD%D0%BE%D0%B5_%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE "Двоичное дерево"). Каждый узел такого дерева содержит информацию о некотором свойстве (его текстовое описание), а каждый лист - информацию об объекте (его название). Любой узел имеет ровно два дочерних узла, один из которых для определенности назовем *"правым"*, а другой, соответственно, *"левым"*. При этом должно выполняется следующее правило: для всех объектов, содержащихся в поддереве, корневым узлом которого является *правый* дочерний узел некоторого узла, условие, содержащиеся в родителе корневого элемента этого поддерева, **должно** выполняться. При этом для всех объектов, содержащихся в поддереве, корневым узлом которого является *левый* дочерний узел некоторого узла, условие, содержащиеся в родителе корневого элемента этого поддерева, **не должно** выполняться.

Для удобства работы с базой данных и визуализации содержащийся в ней информации, ее можно графически представить в виде ориентированного графа. Например, логическую структуру базы данных, хранящую названия материков Земли и некоторые их свойства, можно изобразить следующим образом:

![demo.png](https://github.com/Allexande/PhystechTasks/blob/master/Akinator/Pics/demo.png)

На этом рисунке узлы дерева изображены как прямоугольники с надписями (свойствами), листья - как эллипсы с названиями объектов (в данном случае названиями материков), а связи дочернего узла и его родителя как стрелочки. Стрелочки зеленого цвета ведут от родителя к *правому* сыну, а стрелочки красного цвета - от родителя к *левому* сыну. В дальнейшем мы будем неоднократно использовать  подобное представление баз данных с аналогичными обозначениями. 
## Хранение базы данных
Поскольку одна и та же база данных может быть востребована во время различных сеансов работы с программой, необходимо иметь возможность сохранять ее в памяти компьютера. Данная опция реализована в виде записи данных из базы в текстовый файл, с последующей возможностью считать из него данные и возобновить работу с базой.
Текстовая запись базы данных имеет чёткую структуру, определяющуюся следующими правилами:

- Вся запись представляет из себя последовательность строк, содержимое каждой из которых подходит под один из следующих пунктов :
  * Символ начала блока `{` 
  * Символ конца блока `}`
  *  Произвольная строка, первым и последним символом которой являются `"`

- В первой строке внутри двойных кавычек `"` записано значение корневого узла, то есть текст содержащегося в нем свойства.
- После каждого записанного свойства следует описание двух подряд идущих блоков. В первом блоке описывается поддерево, корневым элементом которого является *правый* сын узла с данным свойством, а во втором описывается поддерево, корневым элементом которого является *левый* сын узла с данным свойством.
- Если *правым* или *левым* сыном некоторого узла является не узел, а лист, то значения листа (название объекта) записывается в соответствующий блок, после чего данный блок закрывается.
- Каждый блок начинается с символа открытия `{` и заканчивается символом закрытия `}`, между которыми должно быть не менее 1 строки. 

В качестве примера файла, информация в котором записана по этим правилам, мы возьмем небольшую базу данных, содержащую 2 свойства и 3 объекта:

![file.png](https://github.com/Allexande/PhystechTasks/blob/master/Akinator/Pics/file.png)

В текстовом формате эта база данных будет выглядеть следующим образом:
```
"Холодное"
{
"Мороженое"
}
{
"Шоколадное"
{
"Конфета"
}
{
"Вафля"
}
}
```
## Функционал

При помощи данной программы пользователь может выполнять следующие действия:

- Нахождение "определения" объекта, то есть получение одним за одним свойств всех узлов, соединяющих данный объект и корневой узел дерева.
- Нахождение "сравнения" двух объектов, то есть получение одним за одним свойств всех узлов, соединяющих данные объекты и корневой узел дерева, с указанием какие узлы являются общими для обоих объектов, а какие нет.
- Нахождения объекта через вводимые пользователем данные о его свойствах, путем обхода дерева начиная с корневого узла. Алгоритм обхода подробно описан ниже.

Помимо этого имеются инструменты для непосредственной работы с базой данных и ее редактирования, доступные для разработчика:
- Добавление новых объектов и их свойств в базу.
- Генерация изображения, визуализирующего содержимое базы, при помощи [DOT](https://ru.wikipedia.org/wiki/DOT_(%D1%8F%D0%B7%D1%8B%D0%BA)).

## Поиск объекта

Поиск объекта по свойствам - это процесс частичного обхода дерева, конечной целью которого является нахождение объекта через задание некоторых заранее известных его свойств. Для одного конкретного узла данный процесс можно описать следующим алгоритмом:

1. На экран выводится свойство, записанное в данном узле. Оно печатается в форме вопроса, на который пользователь должен дать ответ. *Вводимые пользователем данные* должны дать информацию о том, является ли этой свойство верным для искомого объекта, или нет.
2. В зависимости от *введенных пользователем данных* данных производится одно из действий, описанных ниже.
3. Если дочерний элемент данного узла, на который был совершен переход, оказался не узлом, а листом, то рекурсивный проход по дереву приостанавливается и на экран выводится название объекта из данного листа. Пользователю задается вопрос, является ли этот объект тем, который он загадывал, и в зависимости от *ответа пользователя*  программа либо завершает свою работу (если нужный объект был найден), либо продолжает обход.
